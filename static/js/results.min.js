function binData(e){var t=new Array,a=e.length,r=Math.round(Math.sqrt(a));r=r>50?50:r;for(var n,s,i=Math.max.apply(null,e),l=Math.min.apply(null,e),o=i-l,c=o/r,u=0;u<r;u++){n=l+u*c,s=n+c,t[u]||(t[u]=new Array,t[u][0]=n+c/2);for(var p=0;p<a;p++){var _=e[p];0==u&&0==p?n-=1:n=n,_>n&&_<=s&&(t[u][1]?t[u][1]++:t[u][1]=1)}}return $.each(t,function(e,a){void 0===a[1]&&(t[e][1]=0)}),t}function okBtn(){}function drawPlots(){Highcharts.chart("resultHist",{plotOptions:{column:{pointPadding:0,borderWidth:0,groupPadding:0,shadow:!1}},chart:{type:"column"},tooltip:{enabled:!1},title:{text:"¿Cómo se compara mi resultado con el de otros participantes?",style:{"font-family":"KC"}},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},xAxis:[{labels:{formatter:function(){var e={0:"0<br>Sin preferencia",1:"1<br>Preferencia piel blanca","-1":"-1<br>Preferencia piel morena"},t=e[this.value];return"undefined"!==t?t:this.value}},plotLines:[{color:"#FF0000",width:2,zIndex:99,value:__iatScore}],title:{text:"Puntaje IAT"},alignTicks:!0}],yAxis:[{title:{text:"Frecuencia"}}],series:[{name:"Distribuciónde puntajes IAT",data:__histDScore}]})}function loadResults(e){const t=e.iatScore,a=e.fastestLatency,r=e.slowestLatency,n=e.meanLatency,s=e.errorCount,i=e.dScores;null!=e&&null!=t||e2Handler();const l=binData(i);__histDScore=l,__iatScore=t,$("#result_iat_score").text(t),$("#stat_mean_latency").text(n+" ms"),$("#stat_min_latency").text(a+" ms"),$("#stat_max_latency").text(r+" ms"),$("#stat_errors").text(s+" errores"),t<.5&&t>-.5&&($("#result_preference_size").text("no tienes preferencia alguna"),$("#result_preference_target").text("las personas de piel oscura o piel clara")),t>=.5&&($("#result_preference_size").text("tienes una ligera preferencia"),$("#result_preference_target").text("las personas de piel clara")),t>=.8&&($("#result_preference_size").text("tienes una fuerte preferencia"),$("#result_preference_target").text("las personas de piel clara")),t<=-.5&&($("#result_preference_size").text("tienes una ligera preferencia"),$("#result_preference_target").text("las personas de piel oscura")),t<=-.8&&($("#result_preference_size").text("tienes una fuerte preferencia"),$("#result_preference_target").text("las personas de piel oscura")),drawPlots()}function e1Handler(){$("#main_results").html("<p>Nos fue imposible analizar tus respuestas :( Respondiste extremadamente rápido o al azar; esto dificulta el análisis estadístico que hacemos sobre los datos. Puedes intentar hacer otra vez la prueba.</p>"),$("#result_iat_score").text("No disponible"),$("#stat_mean_latency").text("No disponible"),$("#stat_min_latency").text("No disponible"),$("#stat_max_latency").text("No disponible"),$("#stat_errors").text("No disponible"),$("#results_content").hide()}function e2Handler(){$("#main_results").html("<p>Nos fue imposible analizar tus respuestas :( Ocurrió un error al intentar leer las cookies. ¿Usas algún bloqueador?.</p>"),$("#result_iat_score").text("No disponible"),$("#stat_mean_latency").text("No disponible"),$("#stat_min_latency").text("No disponible"),$("#stat_max_latency").text("No disponible"),$("#stat_errors").text("No disponible"),$("#results_content").hide()}function getResults(){myAPI.endPoints.GET_results(function(e){const t=e.responseContent,a=t.code;"e.1"==a?e1Handler():loadResults(t)})}function setBtns(){$("#OkButton").click(okBtn)}var __iatScore,__histDScore;$(document).ready(function(){setBtns(),myAPI=new iatAPI,getResults()});