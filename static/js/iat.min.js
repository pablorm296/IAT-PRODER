function randomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function keyHandler(e,t=!1,n){var i;window.event?i=e.keyCode:e.which&&(i=e.which);var l=String.fromCharCode(i);if(" "===l&&(l="space"),t&&console.log("Key pressed:"+l),!n)return l;n(l)}function keyCallBack(e){if(__instructions)"space"==e&&(myAPI.endPoints.GET_stimuli(__stage),__instructions=!1);else{if("space"==e)return!1;"e"==e&&iatAnswer(e),"i"==e&&iatAnswer(e)}}function iatAnswer(e){const t=__trialCount+1,n=`#stimHolder_${t}`,i=$(n).attr("label");"e"==e?__left.includes(i)?(console.log("correcto"),__trialCount+=1,playIAT()):console.log("incorrecto"):__right.includes(i)?(console.log("correcto"),__trialCount+=1,playIAT()):console.log("incorrecto")}function assignLabelsAndText(e,t){var n=$("#leftColTitle"),i=$("#rightColTitle"),l=n.children("span")[0],o=n.children("span")[1],r=n.children("span")[2],a=i.children("span")[0],s=i.children("span")[1],_=i.children("span")[2],d=__order;t&&(0===d?d=1:1===d&&(d=0));const c=0===d?1:-1;if("word&img"==e)l.innerText=__imgCat[__order],a.innerText=__imgCat[__order+1*c],r.innerText=__wrdCat[__order],_.innerText=__wrdCat[__order+1*c],l.style.display="block",o.style.display="block",r.style.display="block",a.style.display="block",s.style.display="block",_.style.display="block";else if("word"==e)r.innerText=__wrdCat[__order],_.innerText=__wrdCat[__order+1*c],r.style.display="block",_.style.display="block";else{if("img"!=e)throw"Invalid stageType";l.innerText=__imgCat[__order],a.innerText=__imgCat[__order+1*c],l.style.display="block",a.style.display="block"}}function showInstructions(){switch(__instructions=!0,__stage){case 1:assignLabelsAndText("word",!1);break;case 2:assignLabelsAndText("img",!1);break;case 3:case 4:assignLabelsAndText("word&img",!1);break;case 5:assignLabelsAndText("word",!0);break;case 6:case 7:assignLabelsAndText("word&img",!0)}}function placeStimuli(e){__stageLength=e.length;for(let t=0;t<e.length;t++){const n=t+1,i=`#stimHolder_${n}`,l=e[t],o=l.type,r=l.label,a=l.content;console.log(i),$(i).hide(),"img"==o?($(i).html(`<img src='../imgs/stimuli/${a}.jpg'>`),$(i).attr("label",r)):($(i).html(a),$(i).attr("label",r)),$(".stimuli").imagesLoaded(function(){$("#loader").hide(),__trialCount=0,playIAT()})}}function playIAT(){const e=__trialCount+1;__trialCount<__stageLength?(0!=__trialCount&&$(`#stimHolder_${e-1}`).hide(),$(`#stimHolder_${e}`).show(),__trialStart=new Date):($(`#stimHolder_${e-1}`).hide(),__stage+=1,IATloop())}function IATloop(){$("#loader").hide(),__stage>7||1==__stage&&(__order=randomInt(0,1)),showInstructions()}var __order,__trialCount,__stageLength,__trialStart,__left,__right,myAPI,__stage=1,__imgCat=["Piel clara","Piel oscura"],__wrdCat=["Bueno","Malo"],__imgLabel=["white","dark"],__wrdLabel=["good","bad"],__instructions=!1;$(document).ready(function(){IATloop(),$(document).keypress(function(e){e.preventDefault(),keyHandler(e,!0,keyCallBack)})});